<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PLCН Score - Оверлей</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            background-color: transparent !important;
            margin: 0;
            padding: 0;
            overflow: hidden;
            font-family: 'Arial', sans-serif;
        }
        .scoreboard {
            text-shadow: 0 0 5px rgba(255, 255, 255, 0.7);
        }
    </style>
</head>
<body class="bg-transparent">
    <div class="scoreboard p-4 w-full max-w-4xl mx-auto">
        <div class="flex justify-between items-center bg-black bg-opacity-70 rounded-lg p-4">
            <!-- Home Team -->
            <div class="flex-1 flex items-center justify-end gap-4">
                <div class="text-right">
                    <div class="text-3xl font-bold" id="overlayHomeName">Хозяева</div>
                    <div class="text-sm opacity-80" id="overlayCompetition">Название лиги</div>
                </div>
                <div class="flex flex-col items-center gap-1">
                    <div class="w-16 h-16 rounded-full overflow-hidden">
                        <img id="overlayHomeLogo" src="http://static.photos/sport/200x200/1" alt="Home Team" class="w-full h-full object-cover">
                    </div>
                    <div class="text-sm font-medium" id="overlayHomeShortName">ХЗ</div>
                </div>
            </div>
            
            <!-- Score and Time -->
            <div class="flex flex-col items-center mx-4">
                <div class="flex items-center gap-4">
                    <div class="text-6xl font-bold" id="overlayHomeScore">0</div>
                    <div class="text-4xl font-bold">:</div>
                    <div class="text-6xl font-bold" id="overlayAwayScore">0</div>
                </div>
                <div class="flex items-center gap-2 mt-2">
                    <div class="text-xl font-mono px-3 py-1" id="overlayTimer">00:00</div>
                    <div class="text-sm px-2 py-1" id="overlayHalf">1-й</div>
                </div>
            </div>
            
            <!-- Away Team -->
            <div class="flex-1 flex items-center gap-4">
                <div class="flex flex-col items-center gap-1">
                    <div class="w-16 h-16 rounded-full overflow-hidden">
                        <img id="overlayAwayLogo" src="http://static.photos/sport/200x200/2" alt="Away Team" class="w-full h-full object-cover">
                    </div>
                    <div class="text-sm font-medium" id="overlayAwayShortName">ГС</div>
                </div>
                <div>
                    <div class="text-3xl font-bold" id="overlayAwayName">Гости</div>
                    <div class="text-sm opacity-80" id="overlayLocation">Стадион</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Function to update overlay from main page
        function updateOverlay(data) {
            document.getElementById('overlayHomeName').textContent = data.homeName;
            document.getElementById('overlayAwayName').textContent = data.awayName;
            document.getElementById('overlayHomeScore').textContent = data.homeScore;
            document.getElementById('overlayAwayScore').textContent = data.awayScore;
            document.getElementById('overlayTimer').textContent = data.timer;
            document.getElementById('overlayHalf').textContent = data.half;
            document.getElementById('overlayCompetition').textContent = data.competition;
            document.getElementById('overlayLocation').textContent = data.location;
            
            if (data.homeLogo) {
                document.getElementById('overlayHomeLogo').src = data.homeLogo;
            }
            if (data.awayLogo) {
                document.getElementById('overlayAwayLogo').src = data.awayLogo;
            }
            if (data.homeShortName) {
                document.getElementById('overlayHomeShortName').textContent = data.homeShortName;
            }
            if (data.awayShortName) {
                document.getElementById('overlayAwayShortName').textContent = data.awayShortName;
            }
        }
        
        // Check if we're embedded in an iframe (OBS browser source)
        if (window.parent !== window) {
            // Listen for messages from the main page
            window.addEventListener('message', function(e) {
                if (e.data.type === 'scoreboardUpdate') {
                    updateOverlay(e.data);
                }
            });
            
            // Request initial data
            window.parent.postMessage({ type: 'requestInitialData' }, '*');
        } else {
            // For testing purposes - simulate data
            setInterval(() => {
                updateOverlay({
                    homeName: "Хозяева",
                    awayName: "Гости",
                    homeScore: Math.floor(Math.random() * 5),
                    awayScore: Math.floor(Math.random() * 5),
                    timer: "45:00",
                    half: "1-й",
                    competition: "Премьер Лига",
                    location: "Стадион"
                });
            }, 3000);
        }
    </script>
</body>
</html>
